<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For Sanaa ♥</title>
<link href="https://fonts.googleapis.com/css2?family=Italiana&family=Cormorant+Garamond:ital,wght@0,300;0,400;1,300;1,400;1,600&family=Cinzel:wght@400;500&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
html,body{width:100%;height:100%;overflow:hidden;background:#000;}

/* ── INTRO SCREEN ── */
#intro{
  position:fixed;inset:0;z-index:100;
  background:#000;
  display:flex;flex-direction:column;
  align-items:center;justify-content:center;
  cursor:pointer;
  transition:opacity 1.8s ease;
}
#intro.fade-out{opacity:0;pointer-events:none;}
.intro-text{
  font-family:'Italiana',serif;
  font-size:clamp(1.1rem,3.5vw,1.6rem);
  color:rgba(255,220,180,0.5);
  letter-spacing:.4em;
  text-transform:uppercase;
  animation:introPulse 2.5s ease-in-out infinite;
  text-align:center;
  padding:0 20px;
}
@keyframes introPulse{
  0%,100%{opacity:.3;transform:scale(.97);}
  50%{opacity:.9;transform:scale(1);}
}
.intro-hint{
  margin-top:24px;
  font-family:'Cormorant Garamond',serif;
  font-style:italic;
  font-size:.85rem;
  color:rgba(255,180,150,0.35);
  letter-spacing:.2em;
  animation:introPulse 3s 1s ease-in-out infinite;
}

/* ── CANVAS ── */
#bg{position:fixed;inset:0;z-index:0;}

/* ── NEBULA ── */
#nebula{position:fixed;inset:0;z-index:1;pointer-events:none;transition:transform .8s ease;}

/* ── MAIN STAGE ── */
#stage{
  position:fixed;inset:0;z-index:10;
  display:flex;align-items:center;justify-content:center;
  opacity:0;transition:opacity 2s 0.5s ease;
  pointer-events:none;
}
#stage.visible{opacity:1;pointer-events:auto;}

.stage-inner{
  display:flex;flex-direction:column;
  align-items:center;
  gap:0;
  width:100%;max-width:520px;
  padding:0 16px;
}

/* ── HEADER ── */
.header{
  text-align:center;margin-bottom:8px;
  animation:fadeSlideDown 1.2s 0.5s both;
}
.header-eyebrow{
  font-family:'Cinzel',serif;
  font-size:clamp(.48rem,.9vw,.58rem);
  letter-spacing:.55em;
  color:rgba(212,175,106,0.6);
  text-transform:uppercase;
  display:block;
  margin-bottom:6px;
}
@keyframes fadeSlideDown{
  from{opacity:0;transform:translateY(-16px);}
  to{opacity:1;transform:translateY(0);}
}

/* ── TULIP SVG ── */
.flower-wrap{
  position:relative;
  display:flex;justify-content:center;
  animation:fadeSlideDown 1.4s .3s both;
}
.flower-glow{
  position:absolute;
  width:220px;height:220px;top:20px;left:50%;
  transform:translateX(-50%);
  border-radius:50%;
  background:radial-gradient(circle,
    rgba(255,100,140,.28) 0%,
    rgba(180,50,120,.15) 40%,
    rgba(100,30,180,.08) 70%,
    transparent 100%);
  animation:glowBreathe 4s ease-in-out infinite;
  pointer-events:none;
}
@keyframes glowBreathe{
  0%,100%{transform:translateX(-50%) scale(1);opacity:.7;}
  50%{transform:translateX(-50%) scale(1.22);opacity:1;}
}
svg.tulip{width:min(240px,58vw);height:auto;overflow:visible;filter:drop-shadow(0 0 22px rgba(255,100,140,.65)) drop-shadow(0 0 60px rgba(160,60,200,.35));}

/* petal bloom */
.tp{animation:petalOpen 1.8s cubic-bezier(.34,1.56,.64,1) both;}
.tp:nth-child(1){animation-delay:.1s;transform-origin:200px 265px;}
.tp:nth-child(2){animation-delay:.2s;transform-origin:200px 265px;}
.tp:nth-child(3){animation-delay:.3s;transform-origin:200px 265px;}
.tp:nth-child(4){animation-delay:.4s;transform-origin:200px 265px;}
.tp:nth-child(5){animation-delay:.5s;transform-origin:200px 265px;}
.tp:nth-child(6){animation-delay:.6s;transform-origin:200px 265px;}
@keyframes petalOpen{
  from{transform:scaleY(.04) scaleX(.15);opacity:0;}
  to{transform:scaleY(1) scaleX(1);opacity:1;}
}
.stem-anim{stroke-dasharray:380;stroke-dashoffset:380;animation:drawStem 1.1s .05s ease forwards;}
@keyframes drawStem{to{stroke-dashoffset:0;}}
.ll{transform-origin:194px 338px;animation:leafGrow 1.1s .7s cubic-bezier(.34,1.56,.64,1) both;}
.lr{transform-origin:206px 300px;animation:leafGrow 1.1s .95s cubic-bezier(.34,1.56,.64,1) both;}
@keyframes leafGrow{
  from{transform:scale(0) rotate(-18deg);opacity:0;}
  to{transform:scale(1) rotate(0deg);opacity:1;}
}
.tulip-float{animation:tulipFloat 5s ease-in-out infinite;}
@keyframes tulipFloat{
  0%,100%{transform:translateY(0) rotate(-.8deg);}
  50%{transform:translateY(-16px) rotate(.8deg);}
}

/* ── TO NAME ── */
.recipient{
  text-align:center;
  margin-top:2px;
  animation:fadeUp 1s 1.4s both;
}
.rec-label{
  display:block;
  font-family:'Cinzel',serif;
  font-size:clamp(.44rem,.8vw,.54rem);
  letter-spacing:.5em;
  color:rgba(212,175,106,.55);
  text-transform:uppercase;
  margin-bottom:4px;
}
.rec-name{
  font-family:'Italiana',serif;
  font-size:clamp(1.6rem,5vw,2.3rem);
  color:#ffd0de;
  letter-spacing:.06em;
  text-shadow:0 0 30px rgba(255,100,140,.55),0 0 80px rgba(200,80,160,.25);
  line-height:1.1;
}

/* ── DIVIDER ── */
.divider{
  display:flex;align-items:center;gap:12px;
  width:100%;max-width:320px;
  margin:14px 0;
  animation:fadeUp 1s 1.7s both;
}
.div-line{flex:1;height:1px;background:linear-gradient(to right,transparent,rgba(212,175,106,.3),transparent);}
.div-star{font-size:.65rem;color:rgba(212,175,106,.5);}

/* ── QUOTE ── */
.quote-block{
  text-align:center;
  padding:0 8px;
  animation:fadeUp 1.2s 2s both;
}
.quote-mark{
  font-family:'Italiana',serif;
  font-size:3rem;
  color:rgba(212,175,106,.2);
  line-height:.4;
  display:block;
  margin-bottom:10px;
}
.quote-text{
  font-family:'Cormorant Garamond',serif;
  font-style:italic;
  font-size:clamp(1.05rem,3.5vw,1.38rem);
  color:rgba(255,240,230,.88);
  line-height:1.7;
  letter-spacing:.02em;
  text-shadow:0 2px 24px rgba(255,120,160,.12);
}
.quote-text em{
  color:#ffc4d0;
  font-style:normal;
}

/* ── FROM ── */
.from-block{
  margin-top:18px;
  text-align:center;
  animation:fadeUp 1s 2.5s both;
}
.from-line-wrap{
  display:flex;align-items:center;justify-content:center;gap:14px;margin-bottom:4px;
}
.from-dash{width:36px;height:1px;background:rgba(212,175,106,.3);}
.from-label{
  font-family:'Cormorant Garamond',serif;
  font-style:italic;
  font-size:.85rem;
  color:rgba(255,196,200,.55);
  letter-spacing:.12em;
}
.from-name{
  font-family:'Italiana',serif;
  font-size:clamp(1.1rem,3.5vw,1.5rem);
  color:#f0c96a;
  letter-spacing:.08em;
  text-shadow:0 0 20px rgba(240,201,106,.45);
}

/* ── HEARTS ── */
.hearts-row{
  margin-top:14px;
  display:flex;justify-content:center;gap:10px;
  animation:fadeUp 1s 3s both;
}
.hrt{
  font-size:.9rem;
  display:inline-block;
  animation:heartBeat 1.8s ease-in-out infinite;
}
.hrt:nth-child(1){color:#ff6b8a;animation-delay:0s;}
.hrt:nth-child(2){color:#ff9eb5;animation-delay:.25s;}
.hrt:nth-child(3){color:#f0c96a;animation-delay:.5s;}
.hrt:nth-child(4){color:#ff9eb5;animation-delay:.75s;}
.hrt:nth-child(5){color:#ff6b8a;animation-delay:1s;}
@keyframes heartBeat{
  0%,100%{transform:scale(1);}
  35%{transform:scale(1.55);}
}
@keyframes fadeUp{
  from{opacity:0;transform:translateY(16px);}
  to{opacity:1;transform:translateY(0);}
}

/* ── ORBIT OVERLAY ── */
#orbitCanvas{position:fixed;inset:0;z-index:9;pointer-events:none;}

/* ── PARTICLE TRAILS ── */
#trailCanvas{position:fixed;inset:0;z-index:8;pointer-events:none;}

/* ── CORNER ORNAMENTS ── */
.corner{
  position:fixed;
  width:50px;height:50px;
  border-color:rgba(212,175,106,.22);
  border-style:solid;
  pointer-events:none;
  z-index:20;
  animation:cornerFade 1.5s 3.5s both;
}
@keyframes cornerFade{from{opacity:0;}to{opacity:1;}}
.corner.tl{top:18px;left:18px;border-width:1px 0 0 1px;}
.corner.tr{top:18px;right:18px;border-width:1px 1px 0 0;}
.corner.bl{bottom:18px;left:18px;border-width:0 0 1px 1px;}
.corner.br{bottom:18px;right:18px;border-width:0 1px 1px 0;}
.corner-star{
  position:fixed;font-size:.55rem;
  color:rgba(212,175,106,.4);
  pointer-events:none;z-index:20;
  animation:starTwinkle 3s ease-in-out infinite;
}
.corner-star.tl{top:10px;left:10px;}
.corner-star.tr{top:10px;right:10px;animation-delay:.8s;}
.corner-star.bl{bottom:10px;left:10px;animation-delay:1.6s;}
.corner-star.br{bottom:10px;right:10px;animation-delay:2.4s;}
@keyframes starTwinkle{
  0%,100%{opacity:.2;transform:scale(.8) rotate(0deg);}
  50%{opacity:.8;transform:scale(1.2) rotate(45deg);}
}
</style>
</head>
<body>

<!-- INTRO SCREEN -->
<div id="intro">
  <div class="intro-text">A message written<br>across the universe</div>
  <div class="intro-hint">tap anywhere to open ♥</div>
</div>

<!-- CANVAS LAYERS -->
<canvas id="bg"></canvas>
<canvas id="trailCanvas"></canvas>
<canvas id="orbitCanvas"></canvas>

<!-- NEBULA -->
<div id="nebula"></div>

<!-- CORNERS -->
<div class="corner tl"></div><div class="corner tr"></div>
<div class="corner bl"></div><div class="corner br"></div>
<span class="corner-star tl">✦</span>
<span class="corner-star tr">✦</span>
<span class="corner-star bl">✦</span>
<span class="corner-star br">✦</span>

<!-- MAIN STAGE -->
<div id="stage">
  <div class="stage-inner">

    <!-- header -->
    <div class="header">
      <span class="header-eyebrow">✦ &nbsp; a love letter from the cosmos &nbsp; ✦</span>
    </div>

    <!-- TULIP -->
    <div class="flower-wrap">
      <div class="flower-glow"></div>
      <div class="tulip-float">
        <svg class="tulip" viewBox="0 0 400 450" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <!-- Petals -->
            <linearGradient id="p1" x1="30%" y1="0%" x2="70%" y2="100%">
              <stop offset="0%" stop-color="#ffb8cb"/>
              <stop offset="30%" stop-color="#ff6b8a"/>
              <stop offset="100%" stop-color="#6e0e26"/>
            </linearGradient>
            <linearGradient id="p2" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#ffe4ed"/>
              <stop offset="35%" stop-color="#ff4d72"/>
              <stop offset="100%" stop-color="#7a1228"/>
            </linearGradient>
            <linearGradient id="p3" x1="50%" y1="0%" x2="50%" y2="100%">
              <stop offset="0%" stop-color="#fff4f7"/>
              <stop offset="25%" stop-color="#ffadc4"/>
              <stop offset="100%" stop-color="#8c1a30"/>
            </linearGradient>
            <!-- Cosmic shimmer on petals -->
            <radialGradient id="pShimmer" cx="50%" cy="10%" r="90%">
              <stop offset="0%" stop-color="rgba(255,255,255,.28)"/>
              <stop offset="60%" stop-color="rgba(255,200,220,.06)"/>
              <stop offset="100%" stop-color="rgba(255,255,255,0)"/>
            </radialGradient>
            <!-- Stem & leaves -->
            <linearGradient id="stemG" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" stop-color="#163d24"/>
              <stop offset="50%" stop-color="#3f9957"/>
              <stop offset="100%" stop-color="#163d24"/>
            </linearGradient>
            <linearGradient id="leafG1" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#62d680"/>
              <stop offset="100%" stop-color="#163d24"/>
            </linearGradient>
            <linearGradient id="leafG2" x1="100%" y1="0%" x2="0%" y2="100%">
              <stop offset="0%" stop-color="#4ec469"/>
              <stop offset="100%" stop-color="#163d24"/>
            </linearGradient>
            <!-- Glow filters -->
            <filter id="glow" x="-40%" y="-40%" width="180%" height="180%">
              <feGaussianBlur stdDeviation="6" result="b"/>
              <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
            <filter id="softg" x="-20%" y="-20%" width="140%" height="140%">
              <feGaussianBlur stdDeviation="2.5" result="b"/>
              <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
            <filter id="stamen" x="-50%" y="-50%" width="200%" height="200%">
              <feGaussianBlur stdDeviation="4" result="b"/>
              <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
          </defs>

          <!-- STEM -->
          <path class="stem-anim"
            d="M200 272 Q196 308 193 348 Q190 380 192 428"
            stroke="url(#stemG)" stroke-width="9" fill="none" stroke-linecap="round"/>

          <!-- LEAVES -->
          <path class="ll"
            d="M196 344 C176 316 149 276 140 234
               C157 260 181 302 195 330 Z"
            fill="url(#leafG1)"/>
          <path class="lr"
            d="M198 306 C218 278 244 246 256 212
               C238 240 212 272 199 298 Z"
            fill="url(#leafG2)"/>

          <!-- TULIP CUP -->
          <g filter="url(#glow)">
            <!-- outer left -->
            <path class="tp"
              d="M200 270
                 C180 242 158 204 160 160
                 C165 130 180 112 200 104
                 C200 148 199 220 200 270Z"
              fill="url(#p1)"/>
            <!-- outer right -->
            <path class="tp"
              d="M200 270
                 C220 242 242 204 240 160
                 C235 130 220 112 200 104
                 C200 148 201 220 200 270Z"
              fill="url(#p1)"/>
            <!-- back center -->
            <path class="tp"
              d="M200 270
                 C186 230 181 183 184 140
                 C188 115 194 98 200 90
                 C206 98 212 115 216 140
                 C219 183 214 230 200 270Z"
              fill="url(#p2)"/>
            <!-- inner left -->
            <path class="tp"
              d="M200 270
                 C183 246 168 214 170 178
                 C174 150 188 133 200 126
                 C200 166 199 226 200 270Z"
              fill="url(#p2)" opacity=".93"/>
            <!-- inner right -->
            <path class="tp"
              d="M200 270
                 C217 246 232 214 230 178
                 C226 150 212 133 200 126
                 C200 166 201 226 200 270Z"
              fill="url(#p2)" opacity=".93"/>
            <!-- front bright -->
            <path class="tp"
              d="M200 270
                 C190 236 186 197 188 158
                 C192 132 196 116 200 108
                 C204 116 208 132 212 158
                 C214 197 210 236 200 270Z"
              fill="url(#p3)" opacity=".97"/>
          </g>

          <!-- shimmer overlay -->
          <path class="tp"
            d="M200 270
               C190 236 186 197 188 158
               C192 132 196 116 200 108
               C204 116 208 132 212 158
               C214 197 210 236 200 270Z"
            fill="url(#pShimmer)" opacity=".5"/>

          <!-- vein details -->
          <g opacity=".13" stroke="#fff" stroke-width=".9" fill="none">
            <path d="M200 268 Q197 218 196 170"/>
            <path d="M200 268 Q204 218 205 170"/>
            <path d="M200 268 Q190 225 182 180"/>
            <path d="M200 268 Q210 225 218 180"/>
          </g>

          <!-- Stamens -->
          <g filter="url(#stamen)">
            <circle cx="200" cy="140" r="5.5" fill="rgba(255,230,160,.75)"/>
            <circle cx="192" cy="152" r="3.5" fill="rgba(255,210,140,.6)"/>
            <circle cx="208" cy="152" r="3.5" fill="rgba(255,210,140,.6)"/>
            <circle cx="196" cy="160" r="2.5" fill="rgba(255,200,130,.5)"/>
            <circle cx="204" cy="160" r="2.5" fill="rgba(255,200,130,.5)"/>
          </g>

          <!-- tiny heart -->
          <text x="200" y="150" text-anchor="middle"
            font-size="13" fill="rgba(255,240,200,.9)"
            style="filter:url(#softg)">♥</text>

          <!-- cosmic shimmer pulse ring -->
          <ellipse cx="200" cy="210" rx="50" ry="25"
            fill="none" stroke="rgba(240,200,100,.5)" stroke-width="1"
            style="transform-origin:200px 210px;
                   animation:shimOut 3.5s 2s ease-in-out infinite;opacity:0;"/>
        </svg>
      </div>
    </div>

    <!-- RECIPIENT -->
    <div class="recipient">
      <span class="rec-label">for the one who owns my universe</span>
      <div class="rec-name">Sanaa Alqawasmi</div>
    </div>

    <!-- DIVIDER -->
    <div class="divider">
      <div class="div-line"></div>
      <span class="div-star">✦</span>
      <div class="div-line"></div>
    </div>

    <!-- QUOTE -->
    <div class="quote-block">
      <span class="quote-mark">"</span>
      <p class="quote-text">
        In all the infinite stars<br>
        and all the nebulae ever born —<br>
        the universe spent <em>billions of years</em><br>
        just to place you<br>
        in front of me.<br><br>
        <em>I love you</em> beyond,<br>
        every galaxy, every breath.
      </p>
    </div>

    <!-- FROM -->
    <div class="from-block">
      <div class="from-line-wrap">
        <div class="from-dash"></div>
        <span class="from-label">yours, eternally</span>
        <div class="from-dash"></div>
      </div>
      <div class="from-name">Diya Ababneh</div>
    </div>

    <!-- HEARTS -->
    <div class="hearts-row">
      <span class="hrt">♥</span>
      <span class="hrt">♥</span>
      <span class="hrt">♥</span>
      <span class="hrt">♥</span>
      <span class="hrt">♥</span>
    </div>

  </div>
</div>

<style>
@keyframes shimOut{
  0%{transform:scale(.5);opacity:.8;}
  100%{transform:scale(3);opacity:0;}
}
</style>

<script>
/* ══════════════════════════════════════
   INTRO
══════════════════════════════════════ */
const intro = document.getElementById('intro');
const stage = document.getElementById('stage');

function openLetter(){
  intro.classList.add('fade-out');
  setTimeout(()=>{
    intro.style.display='none';
    stage.classList.add('visible');
    startOrbits();
  },1900);
}
intro.addEventListener('click', openLetter);
// Auto-open after 3s if not clicked
setTimeout(openLetter, 3500);

/* ══════════════════════════════════════
   COSMIC BACKGROUND CANVAS
══════════════════════════════════════ */
const bgC  = document.getElementById('bg');
const bgX  = bgC.getContext('2d');
let W, H;

function resize(){
  W = bgC.width  = window.innerWidth;
  H = bgC.height = window.innerHeight;
}
resize();
window.addEventListener('resize', ()=>{ resize(); initStars(); });

/* Stars */
let stars=[];
function initStars(){
  stars=[];
  for(let i=0;i<400;i++){
    stars.push({
      x:Math.random()*W, y:Math.random()*H,
      r:Math.random()*1.8+.15,
      a:Math.random(),
      da:(Math.random()*.007+.002)*(Math.random()<.5?1:-1),
      c:['#ffffff','#ffe8cc','#cce4ff','#ffcce8','#e8ccff'][Math.floor(Math.random()*5)]
    });
  }
}
initStars();

/* Dust clouds */
let dust=[];
function initDust(){
  dust=[];
  const cfg=[
    {x:.12,y:.15,rx:280,ry:120,h:270,a:.09,rot:.22},
    {x:.78,y:.25,rx:240,ry:100,h:220,a:.08,rot:-.15},
    {x:.55,y:.65,rx:300,ry:130,h:310,a:.07,rot:.38},
    {x:.25,y:.72,rx:200,ry:90, h:185,a:.06,rot:-.28},
    {x:.88,y:.78,rx:180,ry:80, h:340,a:.07,rot:.18},
    {x:.42,y:.35,rx:160,ry:70, h:260,a:.05,rot:-.08},
  ];
  cfg.forEach(d=>dust.push({
    x:d.x*W,y:d.y*H,
    rx:d.rx,ry:d.ry,
    hue:d.h,
    a:d.a, ta:d.a,
    rot:d.rot,
    da:(Math.random()*.0004+.0001)*(Math.random()<.5?1:-1)
  }));
}
initDust();

/* Shooting stars */
let shoots=[];
function spawnShoot(){
  shoots.push({
    x:Math.random()*W*.4,
    y:Math.random()*H*.45,
    vx:Math.random()*14+10,
    vy:Math.random()*6+2,
    len:Math.random()*160+80,
    life:1
  });
}
setInterval(spawnShoot,2400);

/* Render loop */
function renderBg(){
  bgX.clearRect(0,0,W,H);

  // Deep space bg
  const g=bgX.createRadialGradient(W*.5,H*.5,0,W*.5,H*.5,Math.max(W,H)*.8);
  g.addColorStop(0,'#110828');
  g.addColorStop(.3,'#0a0418');
  g.addColorStop(.7,'#04020e');
  g.addColorStop(1,'#010108');
  bgX.fillStyle=g; bgX.fillRect(0,0,W,H);

  // Milky Way band
  const mw=bgX.createLinearGradient(0,H*.2,W,H*.8);
  mw.addColorStop(0,'transparent');
  mw.addColorStop(.3,`rgba(180,140,255,0.04)`);
  mw.addColorStop(.5,`rgba(200,160,255,0.07)`);
  mw.addColorStop(.7,`rgba(180,140,255,0.04)`);
  mw.addColorStop(1,'transparent');
  bgX.fillStyle=mw; bgX.fillRect(0,0,W,H);

  // Nebula dust
  dust.forEach(d=>{
    d.a+=d.da;
    if(d.a<.03) d.da=Math.abs(d.da);
    if(d.a>.14) d.da=-Math.abs(d.da);
    bgX.save();
    bgX.translate(d.x,d.y);
    bgX.rotate(d.rot);
    bgX.scale(1,d.ry/d.rx);
    const ng=bgX.createRadialGradient(0,0,0,0,0,d.rx);
    ng.addColorStop(0,  `hsla(${d.hue},65%,55%,${d.a})`);
    ng.addColorStop(.45,`hsla(${d.hue},55%,38%,${d.a*.5})`);
    ng.addColorStop(1,  'transparent');
    bgX.fillStyle=ng;
    bgX.beginPath(); bgX.arc(0,0,d.rx,0,Math.PI*2); bgX.fill();
    bgX.restore();
  });

  // Stars
  stars.forEach(s=>{
    s.a+=s.da;
    if(s.a<=.04||s.a>=1){s.da*=-1;s.a=Math.max(.04,Math.min(1,s.a));}
    bgX.globalAlpha=s.a;
    bgX.fillStyle=s.c;
    bgX.beginPath();bgX.arc(s.x,s.y,s.r,0,Math.PI*2);bgX.fill();
    if(s.r>1.3){
      bgX.globalAlpha=s.a*.35;
      bgX.strokeStyle=s.c; bgX.lineWidth=.5;
      bgX.beginPath();
      bgX.moveTo(s.x-s.r*3.5,s.y);bgX.lineTo(s.x+s.r*3.5,s.y);
      bgX.moveTo(s.x,s.y-s.r*3.5);bgX.lineTo(s.x,s.y+s.r*3.5);
      bgX.stroke();
    }
  });
  bgX.globalAlpha=1;

  // Shooting stars
  shoots.forEach((s,i)=>{
    s.x+=s.vx; s.y+=s.vy; s.life-=.016;
    if(s.life<=0){shoots.splice(i,1);return;}
    const total=Math.sqrt(s.vx*s.vx+s.vy*s.vy);
    const sg=bgX.createLinearGradient(s.x,s.y,s.x-s.vx/total*s.len,s.y-s.vy/total*s.len);
    sg.addColorStop(0,'rgba(255,255,255,0)');
    sg.addColorStop(1,`rgba(255,245,230,${s.life*.85})`);
    bgX.strokeStyle=sg; bgX.lineWidth=1.6;
    bgX.beginPath();
    bgX.moveTo(s.x,s.y);
    bgX.lineTo(s.x-s.vx/total*s.len, s.y-s.vy/total*s.len);
    bgX.stroke();
    // Head sparkle
    bgX.globalAlpha=s.life*.7;
    bgX.fillStyle='#fff';
    bgX.beginPath();bgX.arc(s.x,s.y,1.2,0,Math.PI*2);bgX.fill();
    bgX.globalAlpha=1;
  });

  requestAnimationFrame(renderBg);
}
renderBg();

/* ══════════════════════════════════════
   ORBIT CANVAS
══════════════════════════════════════ */
const orbitC = document.getElementById('orbitCanvas');
const orbitX = orbitC.getContext('2d');

function resizeOrbit(){
  orbitC.width  = window.innerWidth;
  orbitC.height = window.innerHeight;
}
resizeOrbit();
window.addEventListener('resize', resizeOrbit);

const ORBITS=[
  {r:130,ry:.34,color:'#ff6b8a',glow:'rgba(255,107,138,.6)',size:4.5,spd:.0005,off:0},
  {r:160,ry:.3, color:'#f0c96a',glow:'rgba(240,201,106,.5)',size:3.5,spd:.0003,off:2.1},
  {r:185,ry:.28,color:'#c080ff',glow:'rgba(192,128,255,.5)',size:3,  spd:.0007,off:4.2},
  {r:205,ry:.26,color:'#80d8ff',glow:'rgba(128,216,255,.4)',size:2.5,spd:.0002,off:1.05},
];
let oAng=0;
let orbitsRunning=false;

function startOrbits(){
  if(orbitsRunning)return;
  orbitsRunning=true;
  renderOrbits();
}

function renderOrbits(){
  orbitX.clearRect(0,0,orbitC.width,orbitC.height);
  const cx=orbitC.width/2;
  const cy=orbitC.height/2 - 90;

  ORBITS.forEach((o,i)=>{
    const ang=oAng*(o.spd*6000)+o.off;

    // Ring
    orbitX.save();
    orbitX.translate(cx,cy);
    orbitX.scale(1,o.ry);
    orbitX.strokeStyle=`rgba(255,255,255,0.05)`;
    orbitX.lineWidth=.6;
    orbitX.beginPath();
    orbitX.arc(0,0,o.r,0,Math.PI*2);
    orbitX.stroke();
    orbitX.restore();

    // Dot position
    const dx=Math.cos(ang)*o.r;
    const dy=Math.sin(ang)*o.r*o.ry;
    const dotX=cx+dx, dotY=cy+dy;

    // Trail
    const trailLen=18;
    for(let t=1;t<=trailLen;t++){
      const ta=ang - t*.06;
      const tx=cx+Math.cos(ta)*o.r;
      const ty=cy+Math.sin(ta)*o.r*o.ry;
      orbitX.globalAlpha=(1-t/trailLen)*.25;
      orbitX.fillStyle=o.color;
      orbitX.beginPath();
      orbitX.arc(tx,ty,o.size*(1-t/trailLen*.7),0,Math.PI*2);
      orbitX.fill();
    }
    orbitX.globalAlpha=1;

    // Glow
    const gr=orbitX.createRadialGradient(dotX,dotY,0,dotX,dotY,o.size*5);
    gr.addColorStop(0,o.glow);gr.addColorStop(1,'transparent');
    orbitX.fillStyle=gr;
    orbitX.beginPath();orbitX.arc(dotX,dotY,o.size*5,0,Math.PI*2);orbitX.fill();

    // Core
    orbitX.fillStyle=o.color;
    orbitX.beginPath();orbitX.arc(dotX,dotY,o.size,0,Math.PI*2);orbitX.fill();

    // Sparkle cross
    orbitX.globalAlpha=.5;
    orbitX.strokeStyle=o.color;orbitX.lineWidth=.8;
    orbitX.beginPath();
    orbitX.moveTo(dotX-o.size*2.5,dotY);orbitX.lineTo(dotX+o.size*2.5,dotY);
    orbitX.moveTo(dotX,dotY-o.size*2.5);orbitX.lineTo(dotX,dotY+o.size*2.5);
    orbitX.stroke();
    orbitX.globalAlpha=1;
  });

  oAng++;
  requestAnimationFrame(renderOrbits);
}

/* ══════════════════════════════════════
   INTERACTIVE MOUSE PARALLAX
══════════════════════════════════════ */
let mx=0,my=0;
document.addEventListener('mousemove',e=>{
  mx=(e.clientX/window.innerWidth-.5);
  my=(e.clientY/window.innerHeight-.5);
  document.getElementById('nebula').style.transform=
    `translate(${mx*28}px,${my*18}px)`;
  // Subtle flower parallax
  const fw=document.querySelector('.flower-wrap');
  if(fw) fw.style.transform=`translate(${mx*6}px,${my*4}px)`;
});

/* Touch parallax */
document.addEventListener('touchmove',e=>{
  const t=e.touches[0];
  mx=(t.clientX/window.innerWidth-.5);
  my=(t.clientY/window.innerHeight-.5);
},{passive:true});

/* ══════════════════════════════════════
   CLICK SPARKLES
══════════════════════════════════════ */
const trailC=document.getElementById('trailCanvas');
const trailX=trailC.getContext('2d');
function resizeTrail(){trailC.width=window.innerWidth;trailC.height=window.innerHeight;}
resizeTrail();
window.addEventListener('resize',resizeTrail);

let sparks=[];
document.addEventListener('click',e=>{
  if(e.target===intro||intro.contains(e.target))return;
  for(let i=0;i<22;i++){
    const ang=Math.random()*Math.PI*2;
    const spd=Math.random()*4+1.5;
    sparks.push({
      x:e.clientX,y:e.clientY,
      vx:Math.cos(ang)*spd, vy:Math.sin(ang)*spd,
      life:1,
      r:Math.random()*2.5+.8,
      c:['#ff6b8a','#f0c96a','#ffb8cb','#c080ff','#fff'][Math.floor(Math.random()*5)]
    });
  }
});

function renderTrail(){
  trailX.clearRect(0,0,trailC.width,trailC.height);
  sparks.forEach((s,i)=>{
    s.x+=s.vx; s.y+=s.vy;
    s.vy+=.06; s.life-=.022; s.vx*=.97;
    if(s.life<=0){sparks.splice(i,1);return;}
    trailX.globalAlpha=s.life*s.life;
    trailX.fillStyle=s.c;
    trailX.beginPath();trailX.arc(s.x,s.y,s.r*s.life,0,Math.PI*2);trailX.fill();
  });
  trailX.globalAlpha=1;
  requestAnimationFrame(renderTrail);
}
renderTrail();
</script>
</body>
</html>
